<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Second Style - Used Clothes</title>
    <style>
        :root{
            --bg:#0b0b0b;
            --accent:#8a2be2;
            --muted:#f5f5f7;
            --card:#ffffff;
            --radius:10px;
            --shadow:0 10px 30px rgba(0,0,0,0.15);
            --focus:0 0 0 4px rgba(138,43,226,0.18);
        }
        *{box-sizing:border-box}
        body{
            margin:0;
            font-family:Arial,Helvetica,sans-serif;
            background:var(--muted);
            color:#111;
        }

        /* Global buttons */
        .btn{
            display:inline-block;
            background:var(--accent);
            color:#fff;
            padding:12px 16px;
            border-radius:var(--radius);
            border:none;
            cursor:pointer;
            text-decoration:none;
            font-weight:600;
            transition:transform .06s ease, box-shadow .2s ease, background .2s ease;
            box-shadow:0 6px 16px rgba(138,43,226,0.25);
        }
        .btn:hover{ background:#7a22d3 }
        .btn:active{ transform:translateY(1px) }
        .btn:focus-visible{ outline:none; box-shadow:var(--focus) }

        .small-btn{
            background:#222;
            color:#fff;
            padding:10px 12px;
            border-radius:var(--radius);
            border:1px solid rgba(255,255,255,0.08);
            cursor:pointer;
            transition:background .2s ease, box-shadow .2s ease, transform .06s ease;
        }
        .small-btn:hover{ background:#2e2e2e }
        .small-btn:active{ transform:translateY(1px) }
        .small-btn:focus-visible{ outline:none; box-shadow:var(--focus) }

        /* Friendlier auth modal */
        body .modal-backdrop{
            background:rgba(0,0,0,0.6);
            backdrop-filter:saturate(1.1) blur(2px);
        }
        body .modal{
            background:var(--card);
            border-radius:16px;
            padding:22px;
            max-width:520px;
            box-shadow:var(--shadow);
        }
        #authArea{ display:block }
        /* Make the login/register toggle look like a segmented control */
        #authArea > div:first-child{
            background:#f1e9ff;
            border:1px solid rgba(138,43,226,0.25);
            border-radius:12px;
            padding:6px;
        }
        #authArea > div:first-child .small-btn{
            background:transparent;
            color:#4b2a91;
            border:none;
            flex:1;
        }
        #authArea > div:first-child .small-btn:hover{
            background:rgba(138,43,226,0.12);
        }

        /* Inputs: larger, clearer, accessible */
        #modalBackdrop input[type="email"],
        #modalBackdrop input[type="password"]{
            width:100%;
            padding:12px 14px;
            border:1.5px solid #d7d7dd;
            border-radius:12px;
            font-size:1rem;
            background:#fff;
            transition:border-color .15s ease, box-shadow .15s ease, background .15s ease;
        }
        #modalBackdrop input::placeholder{ color:#9aa0a6 }
        #modalBackdrop input:focus{
            outline:none;
            border-color:var(--accent);
            box-shadow:var(--focus);
            background:#fff;
        }
        #modalBackdrop form{ margin-top:6px }
        #modalBackdrop form > input + input{ margin-top:10px }
        #modalBackdrop .muted{ color:#666 }

        /* Hide admin hint inside the login form */
        #loginFormModal .muted{ display:none !important }

        /* Improve close button placement/tap target */
        #closeModal.small-btn{ padding:8px 12px; border-radius:999px }

        /* Header / layout */
        header{
            background:var(--bg);
            color:var(--card);
            padding:20px 0;
        }
        .container{max-width:1100px;margin:0 auto;padding:0 18px}
        .brand{display:flex;align-items:center;justify-content:space-between;gap:12px}
        .brand h1{margin:0;font-size:1.6rem;color:var(--accent)}
        nav a{color:#fff;text-decoration:none;margin-left:14px;padding:8px 10px;border-radius:6px}
        nav a:hover{background:rgba(255,255,255,0.06)}

        /* Improve focus visibility for accessibility across the site */
        a:focus-visible, button:focus-visible{ outline:none; box-shadow:var(--focus) }

        /* Respect reduced motion preference */
        @media (prefers-reduced-motion: reduce){
            .btn, .small-btn{ transition:none }
        }

        .hero{
            background:linear-gradient(180deg, rgba(138,43,226,0.06), transparent);
            padding:30px 0 18px;
        }
        .hero-content{display:flex;flex-wrap:wrap;gap:20px;align-items:center}
        .hero .about{flex:1;min-width:260px}
        .hero .about p{line-height:1.5;color:#222}
        .hero .cta{min-width:220px}
        .btn{
            display:inline-block;background:var(--accent);color:white;padding:10px 14px;border-radius:6px;border:none;cursor:pointer;text-decoration:none;
        }
        .section{padding:22px 0}
        .product-grid{
            display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px;
        }
        .product-card{
            background:var(--card);padding:12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.06);
            display:flex;flex-direction:column;gap:8px;
        }
        .product-card img{width:100%;height:180px;object-fit:cover;border-radius:6px}
        .product-card h3{margin:0;font-size:1.05rem}
        .product-card p{margin:0;color:#444}
        .product-actions{margin-top:auto;display:flex;gap:8px;align-items:center}
        .small-btn{background:#222;color:#fff;padding:8px 10px;border-radius:6px;border:none;cursor:pointer}
        .admin-panel{display:none;background:var(--card);padding:14px;border-radius:8px;margin-top:12px}
        .admin-form input,.admin-form textarea,.admin-form select{width:100%;padding:8px;margin:8px 0;border-radius:6px;border:1px solid #ddd}
        /* modal */
        .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;padding:20px;z-index:40}
        .modal{background:var(--card);max-width:440px;width:100%;padding:16px;border-radius:8px}
        .modal h3{margin:0 0 10px}
        .row{display:flex;gap:8px}
        .muted{color:#666;font-size:0.95rem}
        .top-bar{display:flex;align-items:center;gap:14px}
        .status{color:var(--accent);font-weight:600}
        @media(max-width:680px){
            .brand{flex-direction:column;align-items:flex-start;gap:8px}
            .hero-content{flex-direction:column}
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="brand">
                <div>
                    <h1>Second Style</h1>
                    <div class="muted">Quality used clothes, sustainable fashion</div>
                </div>
                <nav>
                    <a href="#home">Home</a>
                    <a href="#shop">Shop</a>
                    <a href="#" id="loginLink">Login / Register</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        <section id="home" class="hero section">
            <div class="hero-content">
                <div class="about">
                    <h2>About Second Style</h2>
                    <p>
                        Second Style is a small team dedicated to giving pre-loved clothing a second life.
                        We curate quality, stylish items at affordable prices while promoting sustainable shopping.
                        Our selection includes vintage jackets, everyday tees, and unique finds for every season.
                    </p>
                    <p class="muted">Free returns within 7 days. Secure checkout. Friendly customer support.</p>
                </div>
                <div class="cta">
                    <div class="top-bar">
                        <div class="status" id="userStatus">Not logged in</div>
                    </div>
                    <div style="margin-top:12px">
                        <a class="btn" href="#shop">Start Shopping</a>
                        <button class="btn" id="openLoginBtn" style="background:#222">Login</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="shop" class="section">
            <h2>Shop</h2>
            <div id="productsList" class="product-grid"></div>

            <div id="adminPanel" class="admin-panel">
                <h3>Admin Panel</h3>
                <form id="adminForm" class="admin-form">
                    <input type="text" id="prodName" placeholder="Product Name" required>
                    <input type="number" id="prodPrice" placeholder="Price (USD)" step="0.01" required>
                    <input type="url" id="prodImage" placeholder="Image URL" required>
                    <select id="prodCondition" required>
                        <option value="perfect">Perfect</option>
                        <option value="fine">Fine</option>
                        <option value="ok">Ok</option>
                    </select>
                    <textarea id="prodDesc" placeholder="Description" rows="3" required></textarea>
                    <div style="display:flex;gap:8px">
                        <button class="btn" type="submit">Save Product</button>
                        <button class="small-btn" type="button" id="clearEditBtn">Clear</button>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <!-- Modal for login/register -->
    <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
        <div class="modal" role="document">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                <h3 id="modalTitle">Login</h3>
                <button id="closeModal" class="small-btn">Close</button>
            </div>

            <div id="authArea">
                <div style="display:flex;gap:8px;margin-bottom:10px">
                    <button class="small-btn" id="switchToLogin">Login</button>
                    <button class="small-btn" id="switchToRegister">Register</button>
                </div>

                <form id="loginFormModal">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" id="loginPassword" placeholder="Password" required>
                    <div style="margin-top:10px;display:flex;gap:8px">
                        <button class="btn" type="submit">Login</button>
                        <div class="muted" style="align-self:center;font-size:0.9rem">Admin: admin@admin.com / admin</div>
                    </div>
                </form>

                <form id="registerForm" style="display:none">
                    <input type="email" id="regEmail" placeholder="Email" required>
                    <input type="password" id="regPassword" placeholder="Password" required>
                    <div style="margin-top:10px">
                        <button class="btn" type="submit">Create Account</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // admin credentials
        const adminCredentials = { email: 'admin@admin.com', password: 'admin' };

        // sample products (now include condition)
        let products = [
            { id: 1, name: 'Vintage Denim Jacket', price: 49.99, image: 'https://images.unsplash.com/photo-1601924994987-69e26d50dc26?w=1000&q=80&auto=format&fit=crop', description: 'Classic denim jacket in excellent condition', condition: 'perfect' },
            { id: 2, name: 'Casual T-Shirt', price: 19.99, image: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=1000&q=80&auto=format&fit=crop', description: 'Comfortable cotton t-shirt', condition: 'fine' }
        ];

        // user state
        let users = []; // stored simple users
        let loggedUser = null; // {email, isAdmin}
        let pendingBuyId = null;
        let editProductId = null;

        // elements
        const productsList = document.getElementById('productsList');
        const adminPanel = document.getElementById('adminPanel');
        const userStatus = document.getElementById('userStatus');

        // modal
        const modalBackdrop = document.getElementById('modalBackdrop');
        const loginLink = document.getElementById('loginLink');
        const openLoginBtn = document.getElementById('openLoginBtn');
        const closeModal = document.getElementById('closeModal');
        const switchToLogin = document.getElementById('switchToLogin');
        const switchToRegister = document.getElementById('switchToRegister');
        const loginFormModal = document.getElementById('loginFormModal');
        const registerForm = document.getElementById('registerForm');
        const modalTitle = document.getElementById('modalTitle');

        // admin form inputs
        const adminForm = document.getElementById('adminForm');
        const prodName = document.getElementById('prodName');
        const prodPrice = document.getElementById('prodPrice');
        const prodImage = document.getElementById('prodImage');
        const prodCondition = document.getElementById('prodCondition');
        const prodDesc = document.getElementById('prodDesc');
        const clearEditBtn = document.getElementById('clearEditBtn');

        // render
        function displayProducts(){
            productsList.innerHTML = products.map(p => `
                <div class="product-card">
                    <img src="${p.image}" alt="${escapeHtml(p.name)}">
                    <h3>${escapeHtml(p.name)}</h3>
                    <p style="font-weight:600">$${p.price.toFixed(2)}</p>
                    <p class="muted">Condition: ${escapeHtml(capitalize(p.condition))}</p>
                    <p>${escapeHtml(p.description)}</p>
                    <div class="product-actions">
                        <button class="btn" onclick="buyProduct(${p.id})">Buy Now</button>
                        ${isAdmin() ? `<button class="small-btn" onclick="editProduct(${p.id})">Edit</button>
                                                    <button class="small-btn" onclick="deleteProduct(${p.id})">Delete</button>` : ''}
                    </div>
                </div>
            `).join('');
        }

        function capitalize(s){ return String(s).charAt(0).toUpperCase() + String(s).slice(1); }

        function isAdmin(){ return loggedUser && loggedUser.isAdmin; }

        function updateUI(){
            if(loggedUser){
                userStatus.textContent = loggedUser.isAdmin ? `Admin: ${loggedUser.email}` : `User: ${loggedUser.email}`;
                if(isAdmin()) adminPanel.style.display = 'block'; else adminPanel.style.display = 'none';
            } else {
                userStatus.textContent = 'Not logged in';
                adminPanel.style.display = 'none';
            }
            displayProducts();
        }

        // buy flow
        function buyProduct(id){
            if(!loggedUser){
                pendingBuyId = id;
                showModal('login');
                return;
            }
            // complete purchase - simple alert for demo
            const prod = products.find(p => p.id === id);
            alert(`Thank you, ${loggedUser.email}! You purchased "${prod.name}" for $${prod.price.toFixed(2)}.`);
            pendingBuyId = null;
        }
        window.buyProduct = buyProduct; // expose to inline onclick

        // admin product actions
        function editProduct(id){
            const p = products.find(x => x.id === id);
            if(!p) return;
            editProductId = id;
            prodName.value = p.name;
            prodPrice.value = p.price;
            prodImage.value = p.image;
            prodCondition.value = p.condition || 'perfect';
            prodDesc.value = p.description;
            window.scrollTo({top: adminPanel.offsetTop - 20, behavior: 'smooth'});
        }
        window.editProduct = editProduct;

        function deleteProduct(id){
            if(!confirm('Delete this product?')) return;
            products = products.filter(p => p.id !== id);
            displayProducts();
        }
        window.deleteProduct = deleteProduct;

        // admin form submit (create or update)
        adminForm.addEventListener('submit', function(e){
            e.preventDefault();
            const name = prodName.value.trim();
            const price = parseFloat(prodPrice.value);
            const image = prodImage.value.trim();
            const condition = prodCondition.value;
            const desc = prodDesc.value.trim();
            if(!name || isNaN(price) || !image) return;

            if(editProductId){
                const p = products.find(x=>x.id===editProductId);
                if(p){ p.name=name; p.price=price; p.image=image; p.description=desc; p.condition = condition; }
                editProductId = null;
            } else {
                const id = (products.length ? Math.max(...products.map(p=>p.id)) : 0) + 1;
                products.push({id,name,price,image,description:desc,condition});
            }
            adminForm.reset();
            prodCondition.value = 'perfect';
            displayProducts();
        });

        clearEditBtn.addEventListener('click', function(){ editProductId = null; adminForm.reset(); prodCondition.value = 'perfect'; });

        // modal controls
        function showModal(mode='login'){
            modalBackdrop.style.display = 'flex';
            modalBackdrop.setAttribute('aria-hidden','false');
            if(mode==='register'){
                modalTitle.textContent = 'Create Account';
                registerForm.style.display='block';
                loginFormModal.style.display='none';
            } else {
                modalTitle.textContent = 'Login';
                registerForm.style.display='none';
                loginFormModal.style.display='block';
            }
        }
        function hideModal(){ modalBackdrop.style.display='none'; modalBackdrop.setAttribute('aria-hidden','true'); }

        loginLink.addEventListener('click', (e)=>{ e.preventDefault(); showModal('login'); });
        openLoginBtn.addEventListener('click', ()=> showModal('login'));
        closeModal.addEventListener('click', hideModal);
        switchToLogin.addEventListener('click', ()=> showModal('login'));
        switchToRegister.addEventListener('click', ()=> showModal('register'));

        // login submit
        loginFormModal.addEventListener('submit', function(e){
            e.preventDefault();
            const email = document.getElementById('loginEmail').value.trim().toLowerCase();
            const password = document.getElementById('loginPassword').value;
            if(email === adminCredentials.email && password === adminCredentials.password){
                loggedUser = { email, isAdmin:true };
                hideModal();
                updateUI();
                alert('Admin login successful');
                return;
            }
            const found = users.find(u => u.email === email && u.password === password);
            if(found){
                loggedUser = { email, isAdmin:false };
                hideModal();
                updateUI();
                if(pendingBuyId) { buyProduct(pendingBuyId); }
                return;
            }
            alert('Invalid credentials. If you do not have an account, register first.');
        });

        // register submit
        registerForm.addEventListener('submit', function(e){
            e.preventDefault();
            const email = document.getElementById('regEmail').value.trim().toLowerCase();
            const password = document.getElementById('regPassword').value;
            if(!email || !password){ alert('Enter email and password'); return; }
            if(email === adminCredentials.email){
                alert('This email is reserved.');
                return;
            }
            if(users.some(u=>u.email===email)){ alert('Account already exists. Login instead.'); return; }
            users.push({email,password});
            loggedUser = { email, isAdmin:false };
            hideModal();
            updateUI();
            if(pendingBuyId){ buyProduct(pendingBuyId); }
        });

        // utility
        function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[c]); }

        // init
        displayProducts();
        updateUI();

        // close modal on backdrop click
        modalBackdrop.addEventListener('click', (e)=>{ if(e.target===modalBackdrop) hideModal(); });
    </script>
</body>
</html>